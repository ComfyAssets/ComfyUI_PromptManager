/*!
 * imagesLoaded PACKAGED v5.0.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(t,e){"object"==typeof module&&module.exports?module.exports=e():t.imagesLoaded=e()}("undefined"!=typeof window?window:this,function(){function e(){}let t=e.prototype;return t.on=function(t,e){if(!t||!e)return this;let i=this._events=this._events||{},s=i[t]=i[t]||[];return s.includes(e)||s.push(e),this},t.once=function(t,e){if(!t||!e)return this;this.on(t,e);let i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this},t.off=function(t,e){let i=this._events&&this._events[t];if(!i||!i.length)return this;let s=i.indexOf(e);return-1!=s&&i.splice(s,1),this},t.emitEvent=function(t,e){let i=this._events&&this._events[t];if(!i||!i.length)return this;i=i.slice(0),e=e||[];let s=this._onceEvents&&this._onceEvents[t];for(let n of i){s&&s[n]&&(this.off(t,n),delete s[n]),n.apply(this,e)}return this},t.allOff=function(){return delete this._events,delete this._onceEvents,this},"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports&&(module.exports=e),function(t,e){"object"==typeof module&&module.exports?module.exports=e(t):t.imagesLoaded=e(t)}("undefined"!=typeof window?window:this,function(t){let e=t.jQuery,i=t.console;function s(t,e,n){if(!(this instanceof s))return new s(t,e,n);let o=t;"string"==typeof t&&(o=document.querySelectorAll(t)),o?(this.elements=function(t){return Array.isArray(t)?t:"object"==typeof t&&"number"==typeof t.length?[...t]:[t]}(o),this.options={},"function"==typeof e?n=e:Object.assign(this.options,e),n&&this.on("always",n),this.getImages(),e&&(this.jqDeferred=new e.Deferred),setTimeout(this.check.bind(this))):i.error(`Bad element for imagesLoaded ${o||t}`)}s.prototype=Object.create(e.prototype),s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)};const n=["IMG","PICTURE"];s.prototype.addElementImages=function(t){if("IMG"===t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t),null==t.nodeType)return;let e=t.querySelectorAll("img");for(let t of e)this.addImage(t);if("string"==typeof this.options.background){let e=t.querySelectorAll(this.options.background);for(let t of e)this.addElementBackgroundImages(t)}},s.prototype.addElementBackgroundImages=function(t){let e=getComputedStyle(t);if(!e)return;let i=/url\((['"])?(.*?)\1\)/gi,s=i.exec(e.backgroundImage);for(;null!==s;){let i=s&&s[2];i&&this.addBackground(i,t),s=i.exec(e.backgroundImage)}},s.prototype.addImage=function(t){let e=new o(t);this.images.push(e)},s.prototype.addBackground=function(t,e){let i=new r(t,e);this.images.push(i)},s.prototype.check=function(){if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length)return void this.complete();let t=(t,e,i)=>{setTimeout(()=>{this.progress(t,e,i)})};this.images.forEach(function(e){e.once("progress",t),e.check()})},s.prototype.progress=function(t,e,s){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount===this.images.length&&this.complete(),this.options.debug&&i&&i.log(`progress: ${s}`,t,e)},s.prototype.complete=function(){let t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){let t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}};function o(t){this.img=t}function r(t,e){this.url=t,this.element=e,this.img=new Image}return o.prototype=Object.create(e.prototype),o.prototype.check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.img.crossOrigin&&(this.proxyImage.crossOrigin=this.img.crossOrigin),this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.currentSrc||this.img.src))},o.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},o.prototype.confirm=function(t,e){this.isLoaded=t;let{parentNode:i}=this.img,s="PICTURE"===i?.nodeName?i:this.img;this.emitEvent("progress",[this,s,e])},o.prototype.handleEvent=function(t){let e="on"+t.type;this[e]&&this[e](t)},o.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},o.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},o.prototype.unbindEvents=function(){this.proxyImage?.removeEventListener("load",this),this.proxyImage?.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype=Object.create(o.prototype),r.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},r.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},s.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&(t=e,s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(t){if("IMG"===t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t),null==t.nodeType)return;let e=t.querySelectorAll("img");for(let t of e)this.addImage(t);if("string"==typeof this.options.background){let e=t.querySelectorAll(this.options.background);for(let t of e)this.addElementBackgroundImages(t)}},s.prototype.addElementBackgroundImages=function(t){let e=getComputedStyle(t);if(!e)return;let i=/url\((['"])?(.*?)\1\)/gi,s=i.exec(e.backgroundImage);for(;null!==s;){let i=s&&s[2];i&&this.addBackground(i,t),s=i.exec(e.backgroundImage)}},s.prototype.check=function(){if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length)return void this.complete();let t=(t,e,i)=>{setTimeout(()=>{this.progress(t,e,i)})};this.images.forEach(function(e){e.once("progress",t),e.check()})},s.prototype.progress=function(t,e,s){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount===this.images.length&&this.complete(),this.options.debug&&i&&i.log(`progress: ${s}`,t,e)},s.prototype.complete=function(){let t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){let t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},t.fn.imagesLoaded=function(t,e){return new s(this,t,e).jqDeferred.promise(e(this))})}),s.makeJQueryPlugin(),s})});